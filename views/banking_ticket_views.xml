<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Form View for Banking Ticket -->
    <record id="banking_ticket_view_form" model="ir.ui.view">
        <field name="name">x_banking.ticket.view.form</field>
        <field name="model">x_banking.ticket</field>
        <field name="arch" type="xml">
            <form string="Ticket" class="o_banking_form_view">
                <header class="o_banking_header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h2 class="mb-0 text-white">
                            <i class="fa fa-ticket mr-2"></i>Support Ticket
                        </h2>
                        <field name="state" widget="statusbar" statusbar_visible="new,in_progress,done" class="flex-grow-1 ml-4"/>
                    </div>
                </header>
                <sheet class="o_banking_sheet">
                    <div class="oe_title o_banking_card text-center">
                        <h1 style="color: var(--banking-primary); font-size: 2rem; font-weight: 600;">
                            <i class="fa fa-envelope mr-2" title="Subject">Subject</i><field name="name" placeholder="Subject..." nolabel="1"/>
                        </h1>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-8">
                            <div class="o_banking_card">
                                <h4 class="mb-3" style="color: var(--banking-secondary); font-weight: 600;">
                                    <i class="fa fa-align-left mr-2"></i>Description
                                </h4>
                                <field name="description" nolabel="1" placeholder="Describe the issue or request in detail..."/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="o_banking_card">
                                <h4 class="mb-3" style="color: var(--banking-primary); font-weight: 600;">
                                    <i class="fa fa-info-circle mr-2" title="Ticket Details">Ticket Details</i>Ticket Details
                                </h4>
                                <div class="mb-3">
                                    <div class="o_form_label">Customer</div>
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-user mr-2" style="color: var(--banking-secondary);" title="Customer">Customer</i>
                                        <field name="partner_id" nolabel="1"/>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="o_form_label">Assigned To</div>
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-user-circle mr-2" style="color: var(--banking-info);" title="Assigned To">Assigned To</i>
                                        <field name="user_id" nolabel="1"/>
                                    </div>
                                </div>
                                <div>
                                    <div class="o_form_label">Priority</div>
                                    <field name="priority" widget="priority" nolabel="1"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Tree View for Banking Ticket -->
    <record id="banking_ticket_view_tree" model="ir.ui.view">
        <field name="name">x_banking.ticket.view.tree</field>
        <field name="model">x_banking.ticket</field>
        <field name="arch" type="xml">
            <tree string="Tickets" class="o_banking_list_view">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="user_id"/>
                <field name="state"/>
                <field name="priority"/>
            </tree>
        </field>
    </record>

    <!-- Kanban View for Banking Ticket -->
    <record id="banking_ticket_view_kanban" model="ir.ui.view">
        <field name="name">x_banking.ticket.view.kanban</field>
        <field name="model">x_banking.ticket</field>
        <field name="arch" type="xml">
            <kanban default_group_by="state" class="o_banking_kanban_record">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="user_id"/>
                <field name="priority"/>
                <field name="state"/>
                <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_global_click" style="min-height: 180px;">
                            <div class="oe_kanban_details p-3">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <strong class="h6 mb-0" style="color: var(--banking-primary);">
                                        <i class="fa fa-ticket mr-1"></i><field name="name"/>
                                    </strong>
                                    <span t-attf-class="badge badge-#{record.priority.raw_value === '3' ? 'danger' : record.priority.raw_value === '2' ? 'warning' : record.priority.raw_value === '1' ? 'info' : 'secondary'}" style="font-size: 0.7rem;">
                                        <t t-if="record.priority.raw_value === '3'">Urgent</t>
                                        <t t-elif="record.priority.raw_value === '2'">High</t>
                                        <t t-elif="record.priority.raw_value === '1'">Medium</t>
                                        <t t-else="">Low</t>
                                    </span>
                                </div>
                                <div class="mb-2">
                                    <i class="fa fa-user mr-2" style="color: var(--banking-secondary);" title="Customer">Customer</i>
                                    <field name="partner_id"/>
                                </div>
                                <div class="mb-3">
                                    <i class="fa fa-user-circle mr-2" style="color: var(--banking-info);" title="Assigned To">Assigned To</i>
                                    <field name="user_id"/>
                                </div>
                                <div class="mt-3 p-2" style="background: var(--banking-gray-50); border-radius: var(--banking-radius); border-left: 4px solid var(--banking-primary);">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="text-muted small">Status</span>
                                        <span t-attf-class="badge badge-#{record.state.raw_value === 'done' ? 'success' : record.state.raw_value === 'in_progress' ? 'warning' : 'info'}" style="font-size: 0.75rem;">
                                            <t t-esc="record.state.value"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Action for Banking Ticket -->
    <record id="banking_ticket_action" model="ir.actions.act_window">
        <field name="name">Tickets</field>
        <field name="res_model">x_banking.ticket</field>
        <field name="view_mode">kanban,tree,form</field>
    </record>

    <!-- Menu Item for Banking Ticket -->
    <menuitem id="menu_banking_crm_tickets" name="Tickets" parent="menu_banking_crm_root" action="banking_ticket_action" sequence="50"/>

</odoo>
