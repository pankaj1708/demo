<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="crm_lead_form_view_fullwidth_layout" model="ir.ui.view">
    <field name="name">crm.lead.form.view.fullwidth.layout</field>
    <field name="model">crm.lead</field>
    <field name="inherit_id" ref="crm.crm_lead_view_form"/>
    <field name="arch" type="xml">

      <!-- Replace the group containing tag_ids with both columns and your full-width notebook underneath -->
      <xpath expr="//field[@name='tag_ids']/ancestor::group[1]" position="replace">
        <div class="o_banking_card">
          <div class="row">
            <div class="col-md-8">
              <h4 class="mb-3" style="color: var(--banking-primary); font-weight: 600;">
                <i class="fa fa-user mr-2"></i>Lead Information
              </h4>
            </div>
            <div class="col-md-4">
              <div class="text-right">
                <field name="user_id" class="mb-2"/>
                <field name="date_deadline" class="mb-2"/>
                <field name="tag_ids" widget="many2many_tags"/>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Enhanced full-width notebook -->
        <div class="o_banking_notebook_container">
          <notebook>
            <page string="Banking Details" name="banking_details_tab">
              <div class="row">
                <div class="col-md-6">
                  <div class="card" style="border: 1px solid var(--banking-gray-200); border-radius: var(--banking-radius);">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--banking-primary) 0%, var(--banking-primary-dark) 100%); color: white;">
                      <h5 class="mb-0"><i class="fa fa-bank mr-2"></i>Product Interest</h5>
                    </div>
                    <div class="card-body">
                      <field name="expected_product_type" class="mb-3"/>
                      <field name="lead_source_bank" class="mb-3"/>
                      <field name="existing_customer"/>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card" style="border: 1px solid var(--banking-gray-200); border-radius: var(--banking-radius);">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--banking-secondary) 0%, #047857 100%); color: white;">
                      <h5 class="mb-0"><i class="fa fa-money mr-2"></i>Financial Profile</h5>
                    </div>
                    <div class="card-body">
                      <field name="estimated_income" widget="monetary" class="mb-3"/>
                      <field name="employment_status" class="mb-3"/>
                      <div class="text-center p-3" style="background: var(--banking-gray-50); border-radius: var(--banking-radius);">
                        <i class="fa fa-star fa-2x mb-2" style="color: var(--banking-warning);" title="Lead Score"></i>
                        <div class="h4 mb-0" style="color: var(--banking-warning); font-weight: 700;">
                          <field name="lead_score"/> / 100
                        </div>
                        <small class="text-muted">Lead Score</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </page>
            <page string="Lead Enquiry / Pre-Screening" name="lead_enquiry_tab">
              <div class="row">
                <div class="col-md-6">
                  <div class="card" style="border: 1px solid var(--banking-gray-200); border-radius: var(--banking-radius);">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--banking-info) 0%, #0284c7 100%); color: white;">
                      <h5 class="mb-0"><i class="fa fa-user mr-2"></i>Personal Details</h5>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-4">
                          <field name="customer_name_first" class="mb-3"/>
                        </div>
                        <div class="col-md-4">
                          <field name="customer_name_middle" class="mb-3"/>
                        </div>
                        <div class="col-md-4">
                          <field name="customer_name_last" class="mb-3"/>
                        </div>
                      </div>
                      <field name="mobile_number" class="mb-3"/>
                      <field name="national_id" class="mb-3"/>
                      <field name="gender" class="mb-3"/>
                      <field name="date_of_birth" class="mb-3"/>
                      <field name="marital_status"/>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card" style="border: 1px solid var(--banking-gray-200); border-radius: var(--banking-radius);">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--banking-accent) 0%, #d97706 100%); color: white;">
                      <h5 class="mb-0"><i class="fa fa-map-marker mr-2"></i>Location and Employment</h5>
                    </div>
                    <div class="card-body">
                      <field name="residence_woreda" class="mb-3"/>
                      <field name="residence_sub_city" class="mb-3"/>
                      <field name="residence_region" class="mb-3"/>
                      <field name="employment_type" class="mb-3"/>
                      <field name="monthly_annual_income" widget="monetary" class="mb-3"/>
                      <field name="preferred_branch" class="mb-3"/>
                      <field name="preferred_loan_officer_id"/>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="row mt-3">
                <div class="col-12">
                  <div class="card" style="border: 1px solid var(--banking-gray-200); border-radius: var(--banking-radius);">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--banking-success) 0%, #047857 100%); color: white;">
                      <h5 class="mb-0"><i class="fa fa-money mr-2"></i>Loan Requirements</h5>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-6">
                          <div class="d-flex align-items-center mb-3">
                            <i class="fa fa-money mr-2" style="color: var(--banking-success);" title="Requested Loan Amount"></i>
                            <field name="requested_loan_amount" widget="monetary" class="h5 mb-0" style="color: var(--banking-success); font-weight: 600;"/>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <field name="loan_purpose"/>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </page>
            <page string="Qualifying Questions" name="qualifying_questions_tab">
              <div class="row">
                <div class="col-md-8">
                  <div class="card" style="border: 1px solid var(--banking-gray-200); border-radius: var(--banking-radius);">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--banking-warning) 0%, #d97706 100%); color: white;">
                      <h5 class="mb-0"><i class="fa fa-question-circle mr-2"></i>Eligibility Questions</h5>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-6">
                          <field name="is_existing_bank_customer" class="mb-3"/>
                          <field name="existing_account_number" invisible="not is_existing_bank_customer" class="mb-3"/>
                          <field name="has_regular_income_source" class="mb-3"/>
                        </div>
                        <div class="col-md-6">
                          <field name="servicing_other_loans" class="mb-3"/>
                          <field name="has_guarantor" class="mb-3"/>
                        </div>
                      </div>
                      <field name="collateral_security_details" class="mb-3"/>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card" style="border: 1px solid var(--banking-gray-200); border-radius: var(--banking-radius);">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--banking-success) 0%, #047857 100%); color: white;">
                      <h5 class="mb-0">
                        <i class="fa fa-check-circle mr-2"></i>
                        Eligibility Status
                      </h5>
                    </div>
                    <div class="card-body text-center">
                      <field name="is_eligible" widget="boolean" readonly="1"/>
                      <div class="mt-3">
                        <i class="fa fa-thumbs-up fa-3x" style="color: var(--banking-success);" title="Eligibility Status"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </page>
          </notebook>
        </div>
        
        <div class="o_banking_card text-center">
          <button name="action_create_loan_application" type="object" string="Create Loan Application" class="btn btn-primary btn-lg" invisible="not is_eligible">
            <i class="fa fa-plus-circle mr-2"></i>Create Loan Application
          </button>
        </div>
      </xpath>
    </field>
  </record>
</odoo>